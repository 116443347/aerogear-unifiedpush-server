<pre><code>
 - (void)application:(UIApplication *)application
 didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken {

   AGDeviceRegistration *registration =
     [[AGDeviceRegistration alloc] initWithServerURL:
        [NSURL URLWithString:@"http://YOUR_SERVER/ag-push/"]];

   [registration registerWithClientInfo:^(id<AGClientDeviceInformation> clientInfo) {

     [clientInfo setDeviceToken:deviceToken];
     [clientInfo setVariantID:@"YOUR IOS VARIANT ID"];
     [clientInfo setVariantSecret:@"YOUR IOS VARIANT SECRET"];

     // --optional config--
     UIDevice *currentDevice = [UIDevice currentDevice];
     [clientInfo setOperatingSystem:[currentDevice systemName]];
     [clientInfo setOsVersion:[currentDevice systemVersion]];
     [clientInfo setDeviceType: [currentDevice model]];
     } success:^() {
       NSLog(@"PushEE registration worked");
     } failure:^(NSError *error) {
       NSLog(@"PushEE registration Error: %@", error);
   }];
 }
</code></pre>


