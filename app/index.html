<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
        <link rel="stylesheet" type="text/css" href="bower_components/topcoat/css/topcoat-desktop-light.min.css">
        <link rel="stylesheet" href="styles/main.css">
    </head>
    <body>

        <!--The Application Template-->
        <script type="text/x-handlebars">
             {{outlet}}
        </script>

        <!--The Login Page Template-->
        <script type="text/x-handlebars" data-template-name="login">
        {{error}}
            <div>
                <form id="login" {{action login on="submit"}}>
                  <fieldset>
                    <legend><strong>AeroGear</strong> Unified Push Server</legend>
                    <p>
                      <label>Username</label>
                      {{ input type="text" valueBinding="loginName" placeholder="Username"}}
                    </p>
                    <p>
                      <label>Password</label>
                      {{ input type="password" valueBinding="password" placeholder="Password"}}
                    </p>
                    <small>
                      <input type="checkbox">Remember Username<br>
                       Forgot <a href="#">Username</a> or <a href="#">Password</a>?
                    </small>
                    <button class="primary">Log In</button>
                  </fieldset>
                </form>
            </div>
        </script>

        <!-- The Main Admin UI Template-->
        <script type="text/x-handlebars" data-template-name="mobileApps">
            <div class="topcoat-navigation-bar">
                <div class="topcoat-navigation-bar__item left half">
                    <h1 class="topcoat-navigation-bar__title">AeroGear Unified Push Server</h1>
                </div>
                <div class="topcoat-navigation-bar__item right half">
                    <a href="#" {{ action logout this }} >Logout </a>
                </div>
            </div>
            {{outlet}}
        </script>

        <!-- The Mobile Applications Template -->
        <script type="text/x-handlebars" data-template-name="mobileApps/index">
            <div>
                Push Applications - Total Mobile Apps: {{ totalApps }}
                <div>
                    {{partial "appsList"}}
                </div>
            </div>
        </script>

        <!-- The Mobile Applications List Partial-->
        <script type="text/x-handlebars" data-template-name="_appsList">
            <div>{{#linkTo "mobileApps.edit" }}Add New{{/linkTo}}</div>
                <table class="table table-zebra">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Name</th>
                            <th>Description</th>
                            <th>Variants</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each controller}}
                            <tr>
                                <td>
                                    {{#linkTo "mobileApps.edit" this}}Edit{{/linkTo}}
                                    <button class="primary" {{ action "remove" this}}>Remove</button>
                                </td>
                                <td>{{ name }}{{#linkTo "variants" this}} >>> {{/linkTo}}</td>
                                <td><span>{{ descriptionFormatted }}<span></td>
                                <td>{{ totalVariants }}</td>
                            </tr>
                        {{else}}
                            <tr>
                                <td colspan="4">Loadng...Nothing</td>
                            </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </script>

        <!--Template to create/edit a push application-->
        <script type="text/x-handlebars" data-template-name="mobileApps/edit">
            <div>
                {{#if pushApplicationID}}
                    Edit a
                {{else}}
                    Add a New
                {{/if}}
                Push Application
            </div>
            <div>
                <div>
                    <form {{action "edit" controller target="controllers.mobileAppsIndex" on="submit" }}>
                  <fieldset>
                    <p>
                      <label>Name</label>
                      {{input type="text" valueBinding="name"}}
                    </p>
                    <p>
                      <label>Description</label>
                      {{textarea valueBinding="description"}}
                    </p>
                    <input type="reset" class="primary" value="Cancel" {{ action "cancel" controller target="controllers.mobileAppsIndex"}}>
                    <input type="submit" class="primary" value="Create">
                  </fieldset>
                </form>
                </div>
            </div>
        </script>

        <script type="text/x-handlebars" data-template-name="variants">
            {{outlet}}
        </script>

        <script type="text/x-handlebars" data-template-name="variants/index">
            <div>{{#linkTo "mobileApps"}}Push Applications{{/linkTo}} > Variants</div>
            <div class="header">
                <h2>{{ name }}</h2>
                <span>{{ description }}</span>
            </div>
            <div class="sub-header">
                <h3>Authentication Info</h3>
                <span>
                    Use this Application ID and Secret combination to send notification to all variants
                </span>
                <div>
                    Application ID: {{ pushApplicationID }}
                    <br>
                    Secret: {{ masterSecret }}
                </div>
            </div>
            {{#if isLoaded}}
                {{#linkTo "variants.add"}}Add New{{/linkTo}}
                {{ partial "variantsDetail" }}
            {{else}}
                loading....
            {{/if}}
        </script>

         <!-- The Mobile Applications List Partial-->
        <script type="text/x-handlebars" data-template-name="_variantsDetail">
            <div id="mobile-application-variants-table">
                <table class="table table-zebra">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Name</th>
                            <th>Description</th>
                            <th>Platform</th>
                            <th>Mobile Instances</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each variantList }}
                            <tr>
                                <td>
                                    <button class="primary" {{ action "remove" this}}>Remove</button>
                                </td>
                                <td>{{#linkTo "variant" this}}{{name}}{{/linkTo}}</td>
                                <td>{{ description }}</td>
                                <td>{{ typeFormatted }}</td>
                                <td>{{ totalInstances }}</td>
                            </tr>
                        {{else}}
                            <tr>
                                <td colspan="5">Loadng...{{#if isLoaded}}Nothing Here{{/if}}</td>
                            </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </script>

        <!--Template to create a new push application-->
        <script type="text/x-handlebars" data-template-name="variants/add">
            <div>Add Push Application</div>
            <div>
                <div>
                    <form {{action "add" controller target="controllers.variantsIndex" on="submit" }} >
                  <fieldset>
                    <p>
                      <label>Name</label>
                      {{input type="text" value=variantName}}
                    </p>
                    <p>
                      <label>Description</label>
                      {{input type="text" value=variantDescription}}
                    </p>
                    {{ partial "addVariantsNetwork" }}
                    <input type="reset" class="primary" value="Cancel" {{ action "cancel" controller target="controllers.variantsIndex"}}>
                    <input type="submit" class="primary" value="Create">
                  </fieldset>
                </form>
                </div>
            </div>
        </script>

        <script type="text/x-handlebars" data-template-name="_addVariantsNetwork">
            <div>
                <label>
                    <input type="radio" name="platform" value="android">
                    Google Key
                </label>
                {{input type="text" value=googleKey}}
            </div>
            <div>
                <label>
                    <input type="radio" name="platform" value="iOS">
                    iOS PassPhrase
                </label>
                {{input type="password" value=passphrase}}
            </div>
            <div>
                <label>
                    <input type="radio" name="platform" value="simplePush">
                    Web
                </label>
                {{input type="text" value=pushNetworkURL}}
            </div>
        </script>

        <script type="text/x-handlebars" data-template-name="variant">
            {{outlet}}
        </script>

        <script type="text/x-handlebars" data-template-name="variant/index">
        {{#if isLoaded}}
        <div>{{#linkTo "variants" this}}Back To Push Applications Variant{{/linkTo}}</div>
            <div class="header">
                <h2>{{ name }}</h2>
                <span>{{ description }}</span>
            </div>
            <div class="sub-header">
                <h3>Authentication Info</h3>
                <span>
                    Use this Application ID and Secret combination to send notification to all variants
                </span>
                <div>
                    Variant ID: {{ variantID }}
                    <br>
                    Secret: {{ secret }}
                </div>
            </div>
            {{ variantId }}
                {{ partial "variantDetail" }}
            {{else}}
                loading....
            {{/if}}
        </script>

        <!-- The Mobile Applications List Partial-->
        <script type="text/x-handlebars" data-template-name="_variantDetail">
            <div id="mobile-application-variant-table">
                <table class="table table-zebra">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Token</th>
                            <th>Description</th>
                            <th>Platform</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#each installations }}
                            <tr>
                                <td>
                                    &nbsp;
                                </td>
                                <td>{{#linkTo "instance" this}}{{deviceToken}}{{/linkTo}}</td>
                                <td>{{ deviceType }}</td>
                                <td>{{ mobileOperatingSystem }}</td>
                            </tr>
                        {{else}}
                            <tr>
                                <td colspan="5">Loadng...{{#if isLoaded}}Nothing Here{{/if}}</td>
                            </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </script>

        <script type="text/x-handlebars" data-template-name="instance">
            {{outlet}}
        </script>

        <script type="text/x-handlebars" data-template-name="instance/index">
            {{#if isLoaded}}
                <div>{{#linkTo "variant" this}}Back To Push Applications Variant{{/linkTo}}</div>
                <div class="header">
                    <h2>{{ name }}</h2>
                    <span>{{ description }}</span>
                </div>
                <div class="sub-header">
                    <h3>Authentication Info</h3>
                    <span>
                        Use this Application ID and Secret combination to send notification to all variants
                    </span>
                    <div>
                        Device Token: {{ deviceToken }}
                    </div>
                </div>
                {{ partial "variantInstanceDetail" }}
            {{else}}
                loading....
            {{/if}}
        </script>

        <!-- The Mobile Applications List Partial-->
        <script type="text/x-handlebars" data-template-name="_variantInstanceDetail">
            <div id="mobile-application-variant-table">
                <table class="table table-zebra">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Alias</th>
                            <th>Description</th>
                            <th>Platform</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                &nbsp;
                            </td>
                            <td>{{ alias }}</td>
                            <td>{{ deviceType }}</td>
                            <td>{{ mobileOperatingSystem }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </script>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <!-- build:js scripts/main.js -->
        <script src="bower_components/jquery/jquery.min.js"></script>
        <script src="bower_components/jquery-form/jquery.form.js"></script>
        <script src="bower_components/handlebars/handlebars.js"></script>
        <script src="bower_components/ember/ember.js"></script>
        <script src="bower_components/aerogear/aerogear.js"></script>
        <script src="scripts/app.js"></script>
        <script src="scripts/router.js"></script>
        <script src="scripts/controllers/login_controller.js"></script>
        <script src="scripts/controllers/mobileapps_controller.js"></script>
        <script src="scripts/controllers/variants_controller.js"></script>
        <script src="scripts/views/mobileapp_view.js"></script>
        <script src="scripts/models/mobileapp_model.js"></script>
        <script src="scripts/models/mobilevariant_model.js"></script>
        <script src="scripts/models/mobilevariantinstance_model.js"></script>
        <script src="scripts/helpers/aerogear_helper.js"></script>
        <!-- endbuild -->

        <!--<script src="bower_components/jquery-mockjax/jquery.mockjax.js"></script>
        <script src="scripts/mocks/mock.js"></script>-->
</body>
</html>
